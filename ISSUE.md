# ISSUE.md - 不具合管理表

このファイルはプロジェクトで発生した問題・課題を記録し、追跡するための管理表です。

---

## 📊 現在の未解決課題

**未解決数**: 1件
**解決済み**: 0件
**総課題数**: 1件

---

## 🚨 未解決課題

### ISSUE-001: Supabase環境変数未設定エラー

**ステータス**: 🔴 未解決
**優先度**: 高
**発生日**: 2026-01-18
**報告者**: ユーザー（開発サーバーアクセス時）
**担当者**: -

**問題内容**:
```
Error: supabaseUrl is required.
at lib\supabase.ts:6:37
```

タスク一覧ページ (`/tasks`) にアクセスすると500エラーが発生。Supabaseクライアントの初期化時に環境変数が未設定のためエラーが発生している。

**発生箇所**:
- ファイル: `lib/supabase.ts:6`
- 影響範囲: タスク一覧ページ (`app/tasks/page.tsx`)

**エラーログ**:
```
⨯ Error: supabaseUrl is required.
  at __TURBOPACK__module__evaluation__ (lib\supabase.ts:6:37)
  at __TURBOPACK__module__evaluation__ (lib\tasks.ts:1:1)
  at __TURBOPACK__module__evaluation__ (app\tasks\page.tsx:2:1)

4 | const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;
5 |
> 6 | export const supabase = createClient(supabaseUrl, supabaseAnonKey);
  |                                     ^
```

**原因**:
1. `.env.local` ファイルが存在しない、または環境変数が設定されていない
2. Supabaseプロジェクトがまだ作成されていない
3. 環境変数名の誤り

**対応方法**:

**オプション1: Supabaseプロジェクトを作成して設定（本番環境用）**
1. https://supabase.com でプロジェクト作成
2. プロジェクトURL、Anon Keyを取得
3. `.env.local.example` を `.env.local` にコピー
4. 以下の環境変数を設定:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=your_project_url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
   ```
5. 開発サーバーを再起動

**オプション2: モックデータで開発を進める（開発環境用）**
1. `lib/supabase.ts` を修正して環境変数がない場合のフォールバック処理を追加
2. `app/tasks/page.tsx` でモックデータを表示
3. Supabase接続は後回しにして、UI実装を優先

**進捗状況**:
- [ ] ユーザー側: Supabaseプロジェクト作成
- [ ] ユーザー側: 環境変数設定
- [ ] 開発側: モックデータ対応の検討

**関連Issue**: なし
**関連コミット**: なし

---

## ✅ 解決済み課題

現在、解決済みの課題はありません。

---

## 📋 既知の制限事項（Issue扱いではない）

### LIMIT-001: Windows環境でのプロダクションビルドエラー

**ステータス**: ⚠️ 既知の制限事項（回避策あり）
**発生日**: プロジェクト初期
**影響**: ローカルでのプロダクションビルドができない

**問題内容**:
```bash
npm run build
# TypeError: generate is not a function
```

**原因**:
Windows環境でのNext.js 15 + TailwindCSS v3 + nanoid/PostCSSの互換性問題

**回避策**:
- ローカル開発: `npm run dev` を使用（正常動作）
- 本番ビルド: Vercel/Netlifyなどのクラウド環境でビルド（Linux環境では問題なし）

**検証済みの試行**:
- Node.js 20/22/24 すべてで同じエラー
- Next.js 15/16 すべてで同じエラー
- 静的エクスポート、スタンドアロンビルド、Webpack、Babel すべて失敗

**結論**: 開発は継続可能、本番デプロイ時にクラウド環境でビルドする運用で対応

詳細: `docs/session-handover.md` 参照

---

## 📝 Issue記録ルール

### Issueの記録タイミング

1. **ユーザーからのエラー報告があった時**
2. **コードレビューでバグを発見した時**
3. **新機能実装中に問題が発覚した時**
4. **テスト実行でエラーが発生した時**

### Issue番号の付与ルール

- フォーマット: `ISSUE-XXX` (XXXは3桁の連番)
- 例: `ISSUE-001`, `ISSUE-002`, ...
- 解決済みでも番号は欠番にしない（履歴として残す）

### ステータス

- 🔴 **未解決**: 対応中または未着手
- 🟡 **調査中**: 原因を調査中
- 🟢 **解決済み**: 修正完了、テスト済み
- ⚠️ **保留**: 優先度が低い、または他の作業待ち

### 優先度

- **緊急**: アプリケーションが動作しない致命的なエラー
- **高**: 主要機能が使えない、データ損失の可能性がある
- **中**: 機能に支障があるが回避策がある
- **低**: UI/UXの問題、軽微なバグ

### Issueテンプレート

```markdown
### ISSUE-XXX: [問題の簡潔な説明]

**ステータス**: 🔴 未解決
**優先度**: [緊急/高/中/低]
**発生日**: YYYY-MM-DD
**報告者**: [ユーザー/開発者]
**担当者**: [担当者名]

**問題内容**:
[問題の詳細な説明]

**発生箇所**:
- ファイル: [ファイル名:行数]
- 影響範囲: [影響を受ける機能やページ]

**エラーログ**:
```
[エラーメッセージ]
```

**原因**:
[原因の説明]

**対応方法**:
[解決策の説明]

**進捗状況**:
- [ ] タスク1
- [ ] タスク2

**関連Issue**: [関連するIssue番号]
**関連コミット**: [コミットハッシュ]
```

---

## 🔍 フェーズ別Issue履歴

### Phase 1: プロジェクトセットアップ（完了）
- Issue発生なし

### Phase 2: Supabase基盤構築（完了）
- Issue発生なし

### Phase 3: UI実装 - タスク一覧ページ（進行中）
- **ISSUE-001**: Supabase環境変数未設定エラー（未解決）

### Phase 4: UI実装 - タスク詳細モーダル（未着手）
- 未実装

### Phase 5: フィルター・検索機能（未着手）
- 未実装

### Phase 6: マニュアル + チーム機能（未着手）
- 未実装

### Phase 7: カレンダー + 管理機能（未着手）
- 未実装

### Phase 8: AI機能統合（未着手）
- 未実装

---

## 📈 統計情報

### 月別Issue発生数

**2026年1月**: 1件（未解決: 1件、解決済み: 0件）

### 優先度別

- 緊急: 0件
- 高: 1件
- 中: 0件
- 低: 0件

### カテゴリ別

- 環境設定: 1件
- バグ: 0件
- UI/UX: 0件
- パフォーマンス: 0件
- セキュリティ: 0件

---

*最終更新: 2026-01-18*
*管理者: Claude Sonnet 4.5*
